# 															data-archiving

## 简介

项目解决的痛点：解决了因数据库表的数据量太大而导致的数据库性能下降的问题。



## 功能介绍

- 对“数据库大表”进行归档/月切/数据迁移。

![输入图片说明](others/%E5%BD%92%E6%A1%A3%E6%95%88%E6%9E%9C.jpg)
  

  

## 技术点
- 定时任务
- 事务
- 重试机制
- 邮件告警
- 分布式锁
- 批量SQL设计
> 特别说明：完全采用JDBC来做持久层，没有使用ORM框架。

> JDBC的优势： 
>
> 1）性能好——相比ORM框架，少了对象转换时的消耗，在大数据量的场景下JDBC的性能要优于ORM框架。
> 2）灵活性高——可以灵活地编写SQL语句，支持复杂的查询，灵活地处理结果集（关键需求：支持复杂的定制化，这也是选JDBC最主要的原因）。
> 3）可控性强——可以控制事务的粒度，支持事务的回滚和提交。



## 安装与使用

### 环境:

- Windows 11
- Redis 5.0
- MySQL 8.0
- JDK 17

### 步骤:

1. 克隆项目到本地
2. 准备好环境、依赖
3. 改改配置文件
4. 运行项目

### 请求方式:

> 详情看接口文档示例。

- 方式1：默认根据 当前输入的日期月份进行数据归档（说明：这样更灵活，随时可以归档，也够用）。
- 方式2：默认根据当前月份进行数据归档，无参数。(TODO)
- 方式3：根据由定时任务触发的归档日期进行数据归档，无参数。(TODO)



## 适用场景
 - 适合高度定制化定制化，对泵项目进行适当调整/“二开”后可以针对特定的数据库/表进行归档。

 - 适用于 单体架构系统/单体架构集群部署的场景。

 - 适合有“峰值流量”波动的系统，比如 半夜/凌晨流量小的时候进行数据归档/月切/数据迁移，避免迁移过程中影响到系统的正常运行业务。

   


## 贡献与合作：
> 如有合作意向，请联系作者 boldsteps@163.com 或飞书。

![输入图片说明](others/%E4%BD%9C%E8%80%85fs%E8%B4%A6%E5%8F%B7.png)


### 扩展/优化方向

1. 利用xxl-job、SEATA分布式事务等等解决方案，实现分布式架构/微服务架构下的“数据库大表”归档/月切/数据迁移。（TODO）

2. 优化数据迁移的效率，采用多线程并发迁移。（TODO）

3. 根据参数配置，实现对不同的数据库、表进行归档/月切/数据迁移。（TODO）

